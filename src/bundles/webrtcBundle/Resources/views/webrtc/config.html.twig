{% extends "/app/Resources/views/base.html.twig" %}


{% block description %} 
	<meta name="description" content="Demo Webrtc with sip protocol kamailio configuration">
{% endblock %}


{% block title %} WEBRTC SIP {% endblock %}

{% block stylesheets %}
	{{ parent() }}

{% endblock %}

{% block javascripts %}
	{{ parent() }}

	<script>
		$("#server").on("change", function(){
			console.log("change")
			$("#changeApi").submit();
		});
	</script>
{% endblock %}

{% block body %}

	{{ parent() }}

	<div class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 m-t-lg">

          	<h1 class="block text-info text-center" style ="padding-top:20px"> CONFIGURATIONS</h1>

		<form  id="changeApi" class="tab-content"  action="{{ path("webrtc-config") }}" method="POST" >
			<input type="hidden" name="changeApi" value="true" />
			<div role="tabpanel" style ="padding-top:30px"  id="api">
          			<h4 class="wrapper strong  text-info text-center m-t-xl"> Transport Layer Configurations <a href="#" class="pull-right text-primary text-xl"><i class="glyphicon glyphicon-question-sign"></i></a></h4> 
		        	<div class="account-wall m-t-xxl">
		        		<div class="form-group has-info">
						<label class="control-label col-sm-4" for="api">API</label>
						<div class="col-sm-8">
					      		<select  id="server" name="server" class="form-control no-b">
					      			<option value="kamailio"{% if api.server == 'kamailio' %} selected="selected"{% endif %}>KAMAILIO</option>
					      			<option value="nodefony"{% if api.server == 'nodefony' %} selected="selected"{% endif %}>NODEFONY REALTIME </option>
					      		</select>
						</div>
					</div>
		        	</div>
			</div>
		</form>

          	<ul class="nav nav-tabs m-t-xl"  style ="padding-top:60px" role="tablist">
          		<li role="presentation" class="{% if not tab %}active{% endif %}"><a href="#user" aria-controls="user" role="tab" data-toggle="tab">USER</a></li>
          		<li role="presentation" class="{% if tab == 'webrtc' %}active{% endif %}"><a href="#webrtc" aria-controls="webrtc" role="tab" data-toggle="tab">WEBRTC</a></li>
          		<li role="presentation" class="{% if tab == 'sip' %}active{% endif %}"><a href="#sip" aria-controls="sip" role="tab" data-toggle="tab">SIP</a></li>
          		<li role="presentation" class="{% if tab == 'audio' %}active{% endif %}"><a href="#audio" aria-controls="audio" role="tab" data-toggle="tab">AUDIO</a></li>
          	</ul>

          	<div class="tab-content" >
			
		        <form  class="tab-content"  action="{{ path("webrtc-config") }}" method="POST" >
          			
				<input type="hidden" name="server" value="{{api.server}}" />

          			<div role="tabpanel" class="tab-pane{% if not tab %} active{% endif %}" id="user">
          				<h4 class="wrapper strong  text-info text-center m-t-xl"> User Configurations <a href="#" class="pull-right text-primary text-xl"><i class="glyphicon glyphicon-question-sign"></i></a></h4> 
		            		<div class="account-wall m-t-xxl">
		                		<div class="form-group has-info">
							<label class="control-label col-sm-4" for="displayName">Display Name</label>
							<div class="col-sm-8">
								<input type="text"  name="user[displayName]"  value="{{ api.user.displayName }}"  class="form-control no-b" placeholder="e.g. John Doe" />
							</div>
						</div>
			        		<div class="form-group has-info m-t-lg">
							<label class="control-label col-sm-4" for="publicIdentity">Public Identity</label>
							<div class="col-sm-8">
								<input type="text"  name="user[publicIdentity]"  value="{{ api.user.publicIdentity }}"  class="form-control no-b" placeholder="" />
							</div>
						</div>
		                		<div class="form-group has-info m-t-lg">
							<label class="control-label col-sm-4" for="realm">Realm</label>
							<div class="col-sm-8">
								<input type="text" name="user[realm]"  value="{{ api.user.realm }}"  class="form-control no-b" placeholder="nodefony.net" />
							</div>
						</div>
					</div>
          			</div>

	          		<div role="tabpanel" class="tab-pane{% if tab == 'webrtc' %} active{% endif %}" id="webrtc">
			    		<h4 class="wrapper strong  text-info text-center m-t-xl">Webrtc Stack Configurations <a href="#" class="pull-right text-primary text-xl"><i class="glyphicon glyphicon-question-sign"></i></a></h4> 
		            		<div class="account-wall m-t-xxl">

						<div class="form-group has-info">
							<label class="control-label col-sm-4" for="ICEServers">Serveurs ICE</label>
							<div class="col-sm-8">
								<input type="text" id="ICEServers" name="webrtc[ICEServers]"  value="{{ api.webrtc.ICEServers }}"  class="form-control no-b" placeholder="" />
							</div>
						</div>
		                		<div class="form-group has-info">
							<label class="control-label col-sm-4" for="maxBandwidth">BANDE PASSANTE MAX (kbps)</label>
							<div class="col-sm-8">
								<input type="text"  name="webrtc[maxBandwidth]"  value="{{ api.webrtc.maxBandwidth }}"  class="form-control no-b" placeholder="{ audio:64, video:512 }" />
							</div>
						</div>
						<div class="form-group has-info">
							<label class="control-label col-sm-4" for="enableVideo">Video enable</label>
							<div class="col-sm-8 text-center">
								<input type="checkbox"  name="webrtc[enableVideo]" {% if api.webrtc.enableVideo %} checked="checked"{% endif %} />
							</div>
						</div>

						<div class="form-group has-info">
							<label class="control-label col-sm-4" for="maxBandwidth">Taille de la vid√©o</label>
							<div class="col-sm-8">
								<input type="text"  name="webrtc[VideoSize]"  value="{{ api.webrtc.VideoSize }}"  class="form-control no-b" placeholder=" { minWidth: 640, minHeight:480, maxWidth: 640, maxHeight:480 }" />
							</div>
						</div>
		            		</div>
	            		</div>

				<div role="tabpanel" class="tab-pane{% if tab == 'sip' %} active{% endif %}" id="sip">
					<h4 class="wrapper strong  text-info text-center m-t-xl">SIP Stack Configurations <a href="#" class="pull-right text-primary text-xl"><i class="glyphicon glyphicon-question-sign"></i></a></h4> 
					<div class="account-wall m-t-xxl">
						<div class="form-group has-info">
							<label class="control-label col-sm-4" for="DTMF">DTMF</label>
							<div class="col-sm-8">
								<select id="DTMF" name="sip[DTMF]" class="form-control no-b">
									<option value="SIP-INFO"{% if api.sip.DTMF == 'SIP-INFO' %} selected="selected"{% endif %}>SIP-INFO</option>
									<option value="RTP-EVENT"{% if api.sip.DTMF == 'RTP-EVENT' %} selected="selected"{% endif %}>RTP-EVENT</option>
									<option value="DTMF-OFF"{% if api.sip.DTMF == 'DTMF-OFF' %} selected="selected"{% endif %}>OFF</option>
								</select>
							</div>
						</div>

						{% if api.sip.publicAdress is not empty %}
						<div class="form-group has-info">
							<label class="control-label col-sm-4" for="publicAdress">IP Public</label>
							<div class="col-sm-8">
								<input type="text"  name="sip[publicAdress]"  value="{{ api.sip.publicAdress }}" class="form-control no-b" placeholder="" />
							</div>
						</div>
						{% endif %}
		                		<div class="form-group has-info">
							<label class="control-label col-sm-4" for="serverUrl">URL Serveur WebSocket</label>
							<div class="col-sm-8">
								<input type="text"  name="sip[serverUrl]"  value="{{ api.sip.serverUrl }}"  class="form-control no-b" placeholder="" />
							</div>
						</div>
						<div class="form-group has-info">
							<label class="control-label col-sm-4" for="sipProxyUrl">URL PROXY SIP outbound</label>
							<div class="col-sm-8">
								<input type="text"  name="sip[sipProxyUrl]"  value="{{ api.sip.sipProxyUrl }}"  class="form-control no-b" placeholder="" />
							</div>
						</div>
					</div>
	            		</div>

				<div role="tabpanel" class="tab-pane{% if tab == 'audio' %} active{% endif %}" id="audio">
	            		</div>

				<div class="row m-t-lg" style ="padding-top:30px" >
					<div class="col-xs-offset-3 col-xs-6">
						<button id="valid" class="btn btn-xl btn-info btn-block m-b-lg"> validation </button>
			        	</div>
				</div>
			</form>
            	</div>

	</div>

{% endblock %}


