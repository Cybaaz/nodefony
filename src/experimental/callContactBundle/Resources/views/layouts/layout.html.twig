{% extends "/app/Resources/views/base.html.twig" %}


{% block title %} {{ title }} {% endblock %}


{% block stylesheets %}
	
	{% stylesheets  output="/callContactBundle/css/layout.css" 
	    "/frameworkBundle/vendors/bootstrap/css/bootstrap.css"
	    "/frameworkBundle/vendors/bootstrap/css/bootstrap-theme.css"
        "/frameworkBundle/vendors/font-awesome/css/font-awesome.min.css"
	    "/frameworkBundle/vendors/dataTable/css/dataTables.bootstrap.min.css"
        "/callContactBundle/assets/css/clean/style.css"
        "/callContactBundle/assets/css/app.css"
        %}
            <link rel="stylesheet" href="{{ asset_url }}" />
        {% endstylesheets %}
        
        <link rel="stylesheet" href="/callContactBundle/css/bootstrap-switch.css" />

{% endblock %}


{% block javascripts %}

	{% javascripts output='/callContactBundle/js/layout.js' filter='?uglifyjs2'
		'/frameworkBundle/vendors/jquery/jquery-2.1.4.min.js'
		"/frameworkBundle/vendors/bootstrap/js/bootstrap.js"
		"/frameworkBundle/vendors/dataTable/js/jquery.dataTables.js"
		"/frameworkBundle/vendors/dataTable/js/dataTables.bootstrap.js"
		"/callContactBundle/twig/twig.js"
		"/callContactBundle/stage/stage.js"
		"/callContactBundle/stage/function.js"
		"/callContactBundle/stage/notificationsCenter.js"
		"/callContactBundle/stage/syslog/syslog.js"
		"/callContactBundle/stage/xml.js"
		"/callContactBundle/stage/io/io.js"	
		"/callContactBundle/stage/crypto/base64.js"
		"/callContactBundle/stage/crypto/md5.js"
		"/callContactBundle/stage/io/authentication/mechanisms/digest-md5/digestMd5.js"
		"/callContactBundle/stage/io/authentication/sasl/sasl.js"
		"/callContactBundle/stage/io/transports/socket.js"
		"/callContactBundle/stage/io/protocols/bayeux/bayeux.js"
		"/callContactBundle/stage/io/realtime/realtime.js"
		"/callContactBundle/stage/kernel/autoload.js"
		"/callContactBundle/stage/kernel/kernel.js"
		"/callContactBundle/stage/kernel/appKernel.js"
		"/callContactBundle/stage/kernel/container.js"
		"/callContactBundle/stage/kernel/routerService.js"
		"/callContactBundle/stage/kernel/controller.js"
		"/callContactBundle/stage/kernel/module.js"
		"/callContactBundle/stage/kernel/translationService.js"
		"/callContactBundle/stage/kernel/locationService.js"
	%}
		<script type="text/javascript" src="{{ asset_url }}"></script>
	{% endjavascripts %}
	
	<script type="text/javascript" src="/callContactBundle/js/bootstrap-switch.js"></script>
	<script type="text/javascript">

		var App = new stage.appKernel(null, "dev", {
			debug: true,
			location:{
				html5Mode:false
			},			
			onLoad: function(kernel){

				var blockEnv = false;
				
				$("#env").bootstrapSwitch({
					labelText: "ENV",
					onText: "PROD",
					offText: "DEV",
					onColor: 'danger',
					offColor: 'info',
					onSwitchChange: function(e, status){
						$.ajax({
							url: "{{ path('callContactDebugConfig', {"name": "name", "value": "value"}) }}".replace('name', 'env').replace('value', status ? 'prod' : 'dev'),
							error: function(data){
								$(this).bootstrapSwitch('toggleState');
								
							}.bind(this)
						});						
					}
				});

				$("#debug").bootstrapSwitch({
					labelText: "DEBUG",
					onColor: 'info',
					onSwitchChange: function(e, status){						
						$.ajax({
							url: "{{ path('callContactDebugConfig', {"name": "name", "value": "value"}) }}".replace('name', 'debug').replace('value', status ? 1 : 0),
							error: function(data){
								$(this).bootstrapSwitch('toggleState');
								
							}.bind(this)
						});
						
					}
				});

				$("#disableVideo").bootstrapSwitch();

				$("#api").change(function(event){
					window.location.href = "?api=" + $(this).val() +"&type=expert"  ;	
				});
				
	
			}
		});
	
	</script>
{% endblock %}


{% block body %}
	
	<header class="header">
		{{ render( controller("callContactBundle:default:nav" )) }}
	</header>

{% endblock %}